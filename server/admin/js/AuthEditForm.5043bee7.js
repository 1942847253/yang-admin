import{y as C,z as _,q as V}from"./element-plus.4d7ad4ec.js";import{b,c as E,d as y,e as w}from"../assets/index.9e470d0b.js";import{_ as M}from"./vue-count-to.713368f2.js";import{d as F,r as l,w as D,o as L,c as v,Q as r,H as n,a as g,O as k}from"./@vue.0f0518a1.js";import"./@vueuse.46304fe6.js";import"./@element-plus.7fac929b.js";import"./@ctrl.9375a141.js";import"./lodash-es.319b1c15.js";import"./async-validator.b44ce63a.js";import"./@popperjs.fd04dfd6.js";import"./escape-html.86960cf8.js";import"./normalize-wheel-es.118890a0.js";import"./pinia.54582b77.js";import"./vue-demi.6e7a88e9.js";import"./vue-router.00ec9ee4.js";import"./vue-draggable-next.7a01fd73.js";import"./axios.95ae4241.js";const B=F({name:"AuthEditForm",components:{},props:{authEditFormVisible:{type:Boolean,default:!1},roleListItem:{type:Object,default:{}}},emits:["authEditFormVisibleClose","roleMenuUpdateSuccess"],setup(e,{emit:o}){const c=l([]),a=l(!1),s=l([]),d=l(),u={children:"children",label:"title"};D(()=>e.authEditFormVisible,t=>{t?(a.value=t,i(),m(e.roleListItem._id)):(s.value=[],a.value=t)});const i=async()=>{const t=await E();c.value=y(t)},m=async t=>{const p=await w(t);s.value=p};return{emit:o,menuListData:c,defaultProps:u,roleMenu:s,treeRef:d,confirmClick:async()=>{let t=[];d.value.getCheckedNodes(!1,!1).forEach(f=>{f.rid&&f.pid!==0&&t.push(f.rid)});const p={roleMenuIds:t,id:e.roleListItem._id};await b(p),o("authEditFormVisibleClose")},cancelClick:()=>{o("authEditFormVisibleClose")},isVisible:a}}}),I={style:{flex:"auto"}},R=k("\u53D6\u6D88"),A=k("\u786E\u8BA4");function $(e,o,c,a,s,d){const u=C,i=V,m=_;return L(),v("div",null,[r(m,{modelValue:e.isVisible,"onUpdate:modelValue":o[0]||(o[0]=h=>e.isVisible=h),title:`\u5173\u8054\u83DC\u5355\uFF1A${e.roleListItem.name}`,"with-header":!0,size:"20%",onClose:e.cancelClick},{footer:n(()=>[g("div",I,[r(i,{onClick:e.cancelClick},{default:n(()=>[R]),_:1},8,["onClick"]),r(i,{type:"primary",onClick:e.confirmClick},{default:n(()=>[A]),_:1},8,["onClick"])])]),default:n(()=>[r(u,{ref:"treeRef",data:e.menuListData,"show-checkbox":"","node-key":"rid","default-expand-all":"","default-checked-keys":e.roleMenu,props:e.defaultProps},null,8,["data","default-checked-keys","props"])]),_:1},8,["modelValue","title","onClose"])])}var x=M(B,[["render",$]]);export{x as default};

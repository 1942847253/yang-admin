import{d as g,e as B,f as S,y,A as L,E as T,b as I,q as N,s as R,p as U,o as $,r as P}from"./element-plus.4d7ad4ec.js";import{f as q,c as z,d as H,h as O,i as Q,a as Y}from"../assets/index.9e470d0b.js";import j from"./MenuAdd.e9e6e543.js";import{_ as G}from"./vue-count-to.713368f2.js";import{d as J,r as s,x as K,Y as b,o as W,c as X,Q as o,H as n,a as m,P as Z,O as p}from"./@vue.0f0518a1.js";import"./@vueuse.46304fe6.js";import"./@element-plus.7fac929b.js";import"./@ctrl.9375a141.js";import"./lodash-es.319b1c15.js";import"./async-validator.b44ce63a.js";import"./@popperjs.fd04dfd6.js";import"./escape-html.86960cf8.js";import"./normalize-wheel-es.118890a0.js";import"./pinia.54582b77.js";import"./vue-demi.6e7a88e9.js";import"./vue-router.00ec9ee4.js";import"./vue-draggable-next.7a01fd73.js";import"./axios.95ae4241.js";const x=J({name:"menuEdit",components:{MenuAdd:j},setup(){const e=s(),l=q(),C=s([]),c=s(0),F=s(""),A=s(),t=s({}),d=s(!1),i=s(!1),f={children:"children",label:"title"},{setLocalStorage:v,getLocalStorage:E}=Y();K(()=>{_(),localStorage.removeItem("menuCache")});const _=async()=>{const u=await z();C.value=H(u),c.value=0,t.value={}};return{pid:c,treeRef:A,menuListData:C,defaultProps:f,checkedMenu:t,ruleFormRef:e,isChecked:i,menuAddVisible:d,parentTitle:F,clickTree:u=>{const a=O(l.menuList.find(w=>u.rid===w.rid));t.value=a,i.value=!0,c.value=t.value.rid,F.value=t.value.title,v("menuCache",a)},onSubmit:()=>{e.value.validate(async u=>{u&&(await Q(t.value),T({message:"\u4FEE\u6539\u6210\u529F",type:"success"}),t.value={},localStorage.removeItem("menuCache"),l.getMenuList(),_())})},cancelClick:()=>{const u=E("menuCache");u&&(t.value=u)},handleCommand:u=>{u==="parent"&&(c.value=0),d.value=!0},menuAddSuccess:()=>{_(),l.getMenuList()},menuAddVisibleClose:()=>{d.value=!1,c.value=t.value.rid}}}}),ee={class:"menu-content"},oe={class:"card-header"},ne=p(" \u6DFB\u52A0\u83DC\u5355 "),ue=p("\u6DFB\u52A0\u7236\u7EA7\u83DC\u5355"),te=p("\u6DFB\u52A0\u5B50\u83DC\u5355"),le={class:"menu-list"},ae={class:"card-header"},se={class:"menu-iocn"},de={class:"menu-form"},ce=p(" \u4FA7\u8FB9\u680F "),ie=p("\u786E\u8BA4"),re=p("\u91CD\u7F6E");function me(e,l,C,c,F,A){const t=b("arrow-down"),d=I,i=N,f=g,v=B,E=S,_=y,k=R,M=b("Menu"),D=L,r=U,h=$,V=P,u=b("MenuAdd");return W(),X("div",ee,[o(k,{class:"box-card1",shadow:"never"},{header:n(()=>[m("div",oe,[o(E,{onCommand:e.handleCommand},{dropdown:n(()=>[o(v,null,{default:n(()=>[o(f,{command:"parent"},{default:n(()=>[ue]),_:1}),o(f,{command:"child",disabled:!e.isChecked||e.pid==0},{default:n(()=>[te]),_:1},8,["disabled"])]),_:1})]),default:n(()=>[o(i,null,{default:n(()=>[ne,o(d,{class:"el-icon--right"},{default:n(()=>[o(t)]),_:1})]),_:1})]),_:1},8,["onCommand"])])]),default:n(()=>[m("div",le,[o(_,{ref:"treeRef","expand-on-click-node":!1,"highlight-current":!0,data:e.menuListData,onNodeClick:e.clickTree,"show-checkbox":"","node-key":"rid","default-expand-all":"",props:e.defaultProps},null,8,["data","onNodeClick","props"])])]),_:1}),o(k,{class:"box-card2",shadow:"never"},{header:n(()=>[m("div",ae,[m("div",se,[o(d,{style:{color:"#1890ff","font-size":"20px"}},{default:n(()=>[o(M)]),_:1})]),m("span",null,"\u7F16\u8F91\u83DC\u5355\uFF1A"+Z(e.checkedMenu&&e.checkedMenu.title),1)])]),default:n(()=>[m("div",de,[o(D,{title:"\u4ECE\u83DC\u5355\u5217\u8868\u9009\u62E9\u4E00\u9879\u540E\uFF0C\u8FDB\u884C\u7F16\u8F91",type:"success",closable:!1}),o(V,{ref:"ruleFormRef",model:e.checkedMenu,"label-width":"90px",class:"demo-ruleForm"},{default:n(()=>[o(r,{label:"\u7C7B\u578B\uFF1A"},{default:n(()=>[ce]),_:1}),o(r,{label:"\u83DC\u5355\u540D\u79F0:",prop:"username"},{default:n(()=>[o(h,{modelValue:e.checkedMenu.title,"onUpdate:modelValue":l[0]||(l[0]=a=>e.checkedMenu.title=a),placeholder:"\u8BF7\u8F93\u5165\u83DC\u5355\u540D\u79F0"},null,8,["modelValue"])]),_:1}),o(r,{label:"\u83DC\u5355\u56FE\u6807:",prop:"password"},{default:n(()=>[o(h,{modelValue:e.checkedMenu.icon,"onUpdate:modelValue":l[1]||(l[1]=a=>e.checkedMenu.icon=a),placeholder:"\u8BF7\u8F93\u5165\u83DC\u5355\u56FE\u6807"},null,8,["modelValue"])]),_:1}),o(r,{label:"\u8DEF\u7531\u5730\u5740:",prop:"password"},{default:n(()=>[o(h,{modelValue:e.checkedMenu.path,"onUpdate:modelValue":l[2]||(l[2]=a=>e.checkedMenu.path=a),placeholder:"\u8BF7\u8F93\u5165\u8DEF\u7531\u5730\u5740"},null,8,["modelValue"])]),_:1}),o(r,null,{default:n(()=>[o(i,{type:"primary",onClick:e.onSubmit,disabled:!e.isChecked},{default:n(()=>[ie]),_:1},8,["onClick","disabled"]),o(i,{onClick:e.cancelClick},{default:n(()=>[re]),_:1},8,["onClick"])]),_:1})]),_:1},8,["model"])])]),_:1}),o(u,{menuAddVisible:e.menuAddVisible,pid:e.pid,parentTitle:e.parentTitle,onMenuAddVisibleClose:e.menuAddVisibleClose,onMenuAddSuccess:e.menuAddSuccess},null,8,["menuAddVisible","pid","parentTitle","onMenuAddVisibleClose","onMenuAddSuccess"])])}var ye=G(x,[["render",me],["__scopeId","data-v-58af6984"]]);export{ye as default};
